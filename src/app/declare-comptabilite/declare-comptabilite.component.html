<div *ngIf="loading" id="loader"></div>
<div>
<fieldset>
    <legend>Choix de l'année et du mois</legend>
    <div class="checkbox-container" id="datelist">
        <div class="input-container" id="Year"> 
           <i class="glyphicon glyphicon-time"></i>
           <label for="year">Sélectionner année</label>
           <select id="year" name="year"[(ngModel)]="option1Value">
              <option>Année</option>
              <option value="2022">2022</option>
              <option disabled value="2023">2023</option>
              <option disabled value="2024">2024</option>
              <option disabled value="2025">2025</option>
              <option disabled value="2026">2026</option>
              <option disabled value="2027">2027</option>
              <option disabled value="2028">2028</option>
              <option disabled value="2029">2029</option>
              <option disabled value="2030">2030</option>
              
          </select>
         </div>
         <div class="input-container" id="Month"> 
           <i class="glyphicon glyphicon-time"></i>
           <label for="month">Sélectionner mois</label>
           <select id="month" name="month" #cricket (change)="verify($event)"[(ngModel)]="option2Value">
              <option>Mois</option>
              <option value="01">(01)janvier</option>
              <option value="02">(02)février</option>
              <option value="03">(03)Mars</option>
              <option value="04">(04)avril</option>
              <option value="05">(05)Mai</option>
              <option value="06">(06)juin</option>
              <option value="07">(07)juillet</option>
              <option value="08">(08)août</option>
              <option value="09">(09)septembre</option>
              <option value="10">(10)octobre</option>
              <option value="11">(11)novembre</option>
              <option value="12">(12)décembre</option>
          </select>
         </div>
      
     </div>
</fieldset>
<!--rubrique de choix des données à saisir-->
<fieldset id="datalist">
    <legend>Liste des donnés à saisir:</legend> 
    <table>
      
      <tbody>
      <tr>
        
       <td style="text-align: center;"> 
          <div><input type="checkbox" id="myCheck1" (click)="myFunction1()"[(ngModel)]="option3Value" /></div>
          <div><label for="rb1">Chiffre d'affaires</label></div>
       </td>
       <td style="text-align: center;">
          <div><input type="checkbox" id="myCheck2" (click)="myFunction2()"[(ngModel)]="option4Value" /></div>
          <div><label for="rb1">Achats</label></div>
        </td>
        <td style="text-align: center;">
          <div><input type="checkbox" id="myCheck3"(click)="myFunction3()"[(ngModel)]="option5Value" /></div>
          <div><label for="rb1">Banques</label></div>
        </td>
        <td style="text-align: center;">
          <div><input type="checkbox" id="myCheck4" (click)="myFunction4()"[(ngModel)]="option6Value" /></div>
          <div><label for="rb1">Salaires</label></div>
        </td> 
    </tr>
    <!--
    <tr id="verifrow">
        
      <td>
        
         <div><input *ngIf="showretenueverif===true" type="checkbox" id="myCheck24" (click)="myFunction24()"[(ngModel)]="option65Value" /></div>
         <div><label  *ngIf="option65Value===true" style="color: green;">Validé</label></div>
         <div><label  *ngIf="option65Value===false" style="color: red;">Non Validé</label></div>

         
      </td>
      <td>
         <div><input  *ngIf="showtfpverif===true" type="checkbox" id="myCheck25" (click)="myFunction25()"[(ngModel)]="option66Value" /></div>
         <div><label *ngIf="option66Value===true" style="color: green;">Validé</label></div>
         <div><label  *ngIf="option66Value===false" style="color: red;">Non Validé</label></div>

       </td>
       <td>
        <div><input *ngIf="showfoprolosverif===true" type="checkbox" id="myCheck26"(click)="myFunction26()"[(ngModel)]="option67Value" /></div>
          <div><label *ngIf="option67Value===true" style="color: green;">Validé</label></div>
          <div><label  *ngIf="option67Value===false" style="color: red;">Non Validé</label></div>

       </td>
       <td>
        <div><input *ngIf="showtvaverif===true" type="checkbox" id="myCheck27" (click)="myFunction27()"[(ngModel)]="option68Value" /></div>
          <div><label *ngIf="option68Value===true" style="color: green;">Validé</label></div>
          <div><label  *ngIf="option68Value===false" style="color: red;">Non Validé</label></div>

       </td>
       <td>
        <div><input *ngIf="showtimbreverif===true" type="checkbox" id="myCheck28" (click)="myFunction28()"[(ngModel)]="option69Value" /></div>
          <div><label *ngIf="option69Value===true" style="color: green;">Validé</label></div>
          <div><label  *ngIf="option69Value===false" style="color: red;">Non Validé</label></div>

       </td>
       <td>
        <div><input *ngIf="showtclverif===true" type="checkbox" id="myCheck29" (click)="myFunction29()"[(ngModel)]="option70Value" /></div>
          <div><label *ngIf="option70Value===true" style="color: green;">Validé</label></div>
          <div><label  *ngIf="option70Value===false" style="color: red;">Non Validé</label></div>

       </td>
     
   </tr>
   -->
      </tbody>
    </table>
  </fieldset> 
  <!--buttonslist-->
  <button id="savebutton" class="btn btn-success"*ngIf="option3Value===true||option4Value===true||option5Value===true||option6Value===true" 
            type="button" (click)="onSubmit()"><i class="fa fa-refresh fa-spin" *ngIf="loading"></i>Sauvegarder</button>
  <button id="resetbutton" class="btn btn-secondary" type="button" (click)="restartform()"
        *ngIf="option3Value===true||option4Value===true||option5Value===true||option6Value===true">Réinitialiser tout</button>
  <!--datacontainer-->
  <div class="container-fluid"id="tabcontainer">
    <mat-tab-group (selectedTabChange)="onTabClick($event)">
        <mat-tab label="Chiffre d'affaires" *ngIf="showcatab===true">
<!--saisie des données factures-->
<div class="container-fluid" id="invoiceform"*ngIf="showinvoiceform===true">
    <!--edition note section-->
    <fieldset id="editionnote" *ngIf="showeditionnote">
    <legend>Edition de notes d'honoraires</legend>
    <table class="table table-striped" id="editionnotesection" [formGroup]="editionnoteform">
    <thead>
    <tr>            
    <th>Jour</th>
    <th>Date complète</th>
    <th>N° Note d'honoraire</th>
    <th>Montant HT</th>
    <th>Montant TVA</th>
    <th>Montant DT</th>
    <th>Montant TTC</th>
     
    </tr>
    </thead>
    <tbody formArrayName="ammounts">
        
        <tr *ngFor="let ammount of ammountControls; let i = index;"[formGroupName]="i">
               
                <td style="width: 50px;">
                    <div class="col-6">
                        <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace(/\./g,'')" 
                           class="form-control"(change)="setdate(i)"formControlName="jour"placeholder="Jour"/>
                    </div>
                   </td>
                   <td style="width: 150px;">
                   <div class="col-6">
                       <input type="text"class="form-control"formControlName="date"placeholder="Date"/>
                   </div>
                  </td>
                  <td style="width: 50px;">
                   <div class="col-6">
                        <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                      class="form-control"formControlName="numeronote"(change)="onChange(i)"placeholder="N° note honoraire"/>
                   </div>
                  </td>
                  <td>
                   <div class="col-6">
                        <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                      class="form-control"formControlName="montantht"(change)="setThreeNumberDecimal($event)"
                      (change)="settva(i)"(change)="setttc(i)"(change)="onChange(i)"placeholder="Montant HT"/>
                   </div>
                  </td>
                  <td>
                   <div class="col-6">
                        <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                      class="form-control"formControlName="montanttva"(change)="setThreeNumberDecimal($event)"(change)="onChange(i)"placeholder="Montant TVA" readonly='true'/>
                   </div>
                  </td>
                  <td>
                   <div class="col-6">
                        <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                      class="form-control"formControlName="montantdt"(change)="onChange(i)"(change)="setThreeNumberDecimal($event)"placeholder="Montant DT"/>
                   </div>
                  </td>
                  <td>
                   <div class="col-6">
                        <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                      class="form-control"formControlName="montantttc"(change)="setht(i)"(change)="setThreeNumberDecimal($event)"(change)="onChange(i)"placeholder="Montant TTC"/>
                   </div>
                  </td>
                  
                  
                  <td>
                   <div>
                   <button type="button" class="btn btn-danger btn-sm"*ngIf="i>0" (click)="removeammount(i)"><span><i class="glyphicon glyphicon-minus"></i></span></button>   
                   </div>
                  </td>
                
        </tr>
        <tr>
            <td colspan="7"></td>
            <td>
                <div>
                <button type="button" class="btn btn-primary mb-2" (click)="addammount()"><span><i class="glyphicon glyphicon-plus"></i></span></button>   
                </div>
               </td>
        </tr>
        <tr id="resultrow">
            <td colspan="3">
                <div class="col-6">
                     <p>Totaux</p>
                </div>
            </td>
            <td style="text-align: center;">{{totalht | number:'1.3-3'| removeComma}}</td>
            <td style="text-align: center;">{{totaltva | number:'1.3-3'| removeComma}}</td>
            <td style="text-align: center;">{{totaldt | number:'1.3-3'| removeComma}}</td>
            <td style="text-align: center;">{{totalttc | number:'1.3-3'| removeComma}}</td>
        </tr>
    </tbody>
    <div class="text-right">
        <input type="submit" class="" value="Submit"(click)="logValue()">
    </div>
    </table>
    </fieldset>
    <!--recette journaliére-->
    <fieldset id="recettejournaliere" *ngIf="showrecettejour">
        <legend>Recette journaliere</legend>
        <table class="table table-striped" id="editionnotesection" [formGroup]="recettejournaliereform">
            <thead>
            <tr>            
            <th>Jour</th>
            <th>Date complète</th>
            <th>Recette</th>
            <th>Montant HT</th>
            <th>Montant TVA</th>
            <th>Montant DT</th>
            <th>Montant TTC</th>  
            </tr>
            </thead>
            <tbody formArrayName="ammounts2">
                <tr *ngFor="let ammount of ammountControls2; let i = index;"[formGroupName]="i">
                       
                        <td >
                            <div class="col-6">
                                <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace(/\./g,'')" 
                                   class="form-control"(change)="setdate2(i)"formControlName="jour"placeholder="Jour"/>
                            </div>
                           </td>
                           <td style="width: 150px;">
                           <div class="col-6">
                               <input type="text"class="form-control"formControlName="date"placeholder="Date"/>
                           </div>
                          </td>
                          <td>
                           <div class="col-6">
                                <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                              class="form-control"formControlName="recette"placeholder="Recette"/>
                           </div>
                          </td>
                          <td>
                            <div class="col-6">
                                 <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                               class="form-control"formControlName="montantht"(change)="setThreeNumberDecimal($event)"
                               (change)="settva2(i)"(change)="setttc2(i)"(change)="onChange2(i)"placeholder="Montant HT"/>
                            </div>
                           </td>
                           <td>
                            <div class="col-6">
                                 <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                               class="form-control"formControlName="montanttva"(change)="setThreeNumberDecimal($event)"(change)="onChange2(i)"placeholder="Montant TVA" readonly='true'/>
                            </div>
                           </td>
                           <td>
                            <div class="col-6">
                                 <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                               class="form-control"formControlName="montantdt"(change)="onChange2(i)"(change)="setThreeNumberDecimal($event)"placeholder="Montant DT"/>
                            </div>
                           </td>
                           <td>
                            <div class="col-6">
                                 <input type="text" onkeyup="value=value.replace(/[^0-9^\.]+/g,'').replace('.','$#$').replace(/\./g,'').replace('$#$','.').replace(/^0+/, '')" 
                               class="form-control"formControlName="montantttc"(change)="setht2(i)"(change)="setThreeNumberDecimal($event)"(change)="onChange2(i)"placeholder="Montant TTC"/>
                            </div>
                           </td>
                          
                          
                          <td>
                           <div>
                           <button type="button" class="hidden"*ngIf="i>0" (click)="removeammount2(i)">Supprimer recette</button>   
                           </div>
                          </td>
                        
                </tr>
                <tr>
                    <td colspan="7"></td>
                    <td>
                        <div>
                        <button type="button" class="hidden" (click)="addammount2()">Ajouter recette</button>   
                        </div>
                       </td>
                </tr>
                <tr id="resultrow">
                    <td colspan="3">
                        <div class="col-6">
                             <p>Totaux</p>
                        </div>
                    </td>
                    <td style="text-align: center;">{{totalht2 | number:'1.3-3'| removeComma}}</td>
                    <td style="text-align: center;">{{totaltva2 | number:'1.3-3'| removeComma}}</td>
                    <td style="text-align: center;">{{totaldt2 | number:'1.3-3'| removeComma}}</td>
                    <td style="text-align: center;">{{totalttc2 | number:'1.3-3'| removeComma}}</td>
                </tr>
            </tbody>
            <div class="text-right">
                <input type="submit" class="" value="Submit"(click)="logValue2()">
            </div>
            </table>
    </fieldset>
    </div>
</mat-tab>
<mat-tab label="Achats" *ngIf="showachattab===true"> 

</mat-tab>
<mat-tab label="Banques" *ngIf="showbanquetab===true"> 

</mat-tab>
<mat-tab label="Salaires" *ngIf="showsalairetab===true"> 

</mat-tab>   
</mat-tab-group>
  </div>
</div>